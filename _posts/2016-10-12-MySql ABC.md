---
title: MySql ABC
date: 2016-10-12 21:50:11
---
关系型数据库--采用关系模型来组织数据的数据库

关系模型指的就是二维表格模型，而一个关系型数据库就是由二维表及其之间的联系所组成的一个数据组织。

#### 数据类型
##### 数值类型

MySql支持所有标准SQL数值数据类型。

| 类型 | 大小(字节) | 描述 |
| :---: | :---:| :---: |
| TINYINT | 1 | 小整数值 |
| SMALLINT | 2 | 大整数值 |
| MEDIUMINT | 3 | 大整数值 |
| INT或INTEGER | 4 | 大整数值 |
| BIGINT | 8 | 极大整数值 |
| FLOAT | 4 | 单精度浮点数 |
| DOUBLE | 8 | 双精度浮点数 |
| DECIMAL | DECIMAL(M, D)，如果M>D为M+2，,否则为D+2 | 小数值 |

##### 日期和时间类型

每个时间类型都有一个有效值范围和一个“零”值，当指定不合法的MySql不能表示的值时使用“零”值。

类型 | 大小（字节）| 描述
:--: | :--: | :--: 
DATE | 3 | YYYY-MM-DD
TIME | 3 | HH:MM:SS
YEAR | 1 | 	YYYY
DATETIME | 8 | YYYY-MM-DD HH:MM:SS
TIMESTAMP | 4 | YYYYMMDD HHMMSS

##### 字符串类型

类型 | 大小（字节）| 描述
:--: | :--: | :--: 
CHAR | 0-255 | 定长字符串
VARCHAR | 0-65 535 | 变长字符串
TINYBLOB | 0-255 | 不超过255个字符的二进制字符串
TINYTEXT | 0-255 | 短文本字符串
BLOB | 0-65 535 | 二进制形式的长文本数据
TEXT | 0-65 535 | 长文本数据
MEDIUMBLOB | 0-16777215 | 二进制形式的中等长度文本数据
MEDIUMTEXT | 0-16777215 | 中等长度文本数据
LONGBLOB | 0-4 294 967 295 | 二进制形式的极大文本数据
LONGTEXT | 0-4 294 967 295 | 极大文本数据

#### ACID属性
原子性

隔离性---> 在所有的操作没有执行完之前，其他会话不能够看到中间改变的过程

一致性---> 事务发生前后，数据总额匹配

持久性

#### InnoDB
是一个事务型引擎，支持回滚，具有崩溃恢复能力，支持行级锁定、ACID事务。

工作原理---> 把数据从磁盘加载内存中，被用户进行读写，这样增加了性能。其设计理论就是充分利用内存，减少磁盘IO使用率，每次版本升级，改善最多的就是这些方面。

#### 事务的实现
mysql在进行事务处理的时候使用的是日志先行的方式，来保证事务可快速和持久运行的，也就是在写数据前，要先写日志--包括事务日志和撤销日志（可以利用撤销日志将数据回滚到修改之前的样子）。

#### 性能调优
表的设计---基本满足第三范式（不存在非关键字段对任一候选关键字段的传递函数依赖）

采用合适的锁机制---InnoDb引擎属于行级锁（开销大，加锁慢，会出现死锁，但并发度高）

选择合适的事务隔离级别

sql优化与合理利用索引---生产环境避免使用子查询，可用left join表连接取代；select的字段正好是索引，那么就用到了覆盖索引，通过覆盖索引可以减少I/O，提高性能；加上辅助索引---sql中or条件，则用不到索引
